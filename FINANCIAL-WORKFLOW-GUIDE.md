# üí∞ Financial Content Workflow Guide

## üéØ New Workflow Overview

**Strategy:** 1 Article = 1 Video (Focused Financial Insights)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Step 1: SCRAPE ALL ARTICLES TODAY                     ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ  ‚Ä¢ Source: Kontan.co.id (all pages)                    ‚îÇ
‚îÇ  ‚Ä¢ No limit on articles                                 ‚îÇ
‚îÇ  ‚Ä¢ Smart delays: 2s per article + progressive          ‚îÇ
‚îÇ  ‚Ä¢ Delay between pages: 3-5s (random)                  ‚îÇ
‚îÇ  ‚Ä¢ Save all to database ‚Üí status: pending              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Step 2: FILTER BY FINANCIAL KEYWORDS                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ  Keywords:                                              ‚îÇ
‚îÇ  ‚Ä¢ USD/Forex: dolar, rupiah, kurs, nilai tukar         ‚îÇ
‚îÇ  ‚Ä¢ Fed/Policy: federal reserve, suku bunga, inflasi    ‚îÇ
‚îÇ  ‚Ä¢ Commodities: emas, minyak, komoditas                ‚îÇ
‚îÇ  ‚Ä¢ Stock: saham, ihsg, wall street                     ‚îÇ
‚îÇ  ‚Ä¢ Crypto: bitcoin, ethereum, kripto                   ‚îÇ
‚îÇ  ‚Ä¢ Economy: ekonomi, gdp, resesi, perdagangan          ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Matching: Loose (partial match)                       ‚îÇ
‚îÇ  Result: ~20-50% of articles match                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Step 3: GENERATE 1 VIDEO PER ARTICLE                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ  For EACH matched article:                             ‚îÇ
‚îÇ    1. Send to Gemini AI                                ‚îÇ
‚îÇ    2. Generate focused video (300-800 words)           ‚îÇ
‚îÇ    3. Structure:                                        ‚îÇ
‚îÇ       - Hook (fakta mengejutkan)                       ‚îÇ
‚îÇ       - Analisis (apa, mengapa, dampak)                ‚îÇ
‚îÇ       - Prediksi H+7 (3 skenario)                      ‚îÇ
‚îÇ       - Actionable tips (3-5 tips)                     ‚îÇ
‚îÇ       - Closing (key takeaway)                         ‚îÇ
‚îÇ    4. Clean format (no markdown, no emoji)             ‚îÇ
‚îÇ    5. Save to database ‚Üí rekomendasi                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Step 4: SEND TO PROJECT A                             ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ  ‚Ä¢ Insert each video to schedules table                ‚îÇ
‚îÇ  ‚Ä¢ Ready for YouTube streaming                         ‚îÇ
‚îÇ  ‚Ä¢ Auto-loop will stream one by one                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ How to Run

### **Option 1: Full Workflow (ONE COMMAND)** ‚≠ê

```bash
cd C:\infomedia\content-generator
npm run workflow
```

**or:**

```bash
node run-financial-workflow.js
```

**What it does:**
1. Scrapes ALL articles from Kontan today
2. Filters by financial keywords
3. Generates 1 video per matched article
4. Sends to Project A
5. Ready to stream!

**Time:** 15-30 minutes (depending on article count)

---

### **Option 2: Step by Step (Manual Testing)**

#### 1Ô∏è‚É£ **Test Scraper**
```bash
npm run test-scraper
```
Result: All articles saved to database

#### 2Ô∏è‚É£ **Test AI Generator**
```bash
npm run test-ai
```
Result: Videos generated for matched articles

#### 3Ô∏è‚É£ **Send to Project A**
```bash
node test-send-to-project-a.js
```
Result: Schedules created

---

## üìä Expected Output

### **Scraping Phase:**
```
üì∞ Found 20 articles on page 1
   [1/20] üì∞ Dolar AS Menguat ke Rp15,500
      ‚úÖ Saved (2,500 chars)
   [2/20] üì∞ Harga Emas Turun 2%
      ‚úÖ Saved (2,200 chars)
   ...
   ‚è≥ Waiting 2s before next article...

‚úÖ Scraping completed!
üìä Total pages scraped: 5
üì∞ Total articles saved: 95
```

### **Filtering Phase:**
```
üîç Filtering by financial keywords...
‚úÖ Matched 42 financial articles

üìä Filter Statistics:
   Total articles: 95
   Matched: 42 (44.2%)
   Categories: {
     usd: 15,
     stock: 10,
     gold: 8,
     economy: 9
   }
```

### **Generation Phase:**
```
[1/42] üé¨ Generating video for:
   Title: Dolar AS Menguat ke Rp15,500
   Category: usd
   Keywords: dolar, rupiah, kurs
   ‚úÖ Video generated and saved (ID: 1)
   üìè Content length: 650 chars

[2/42] üé¨ Generating video for:
   Title: Harga Emas Turun 2%
   Category: gold
   Keywords: emas, gold
   ‚úÖ Video generated and saved (ID: 2)
   üìè Content length: 580 chars
...

‚úÖ Content generation completed!
üìπ Total videos generated: 42
```

---

## üéØ Keyword Categories

### **1. USD & Forex** üá∫üá∏üí±
```
usd, dolar, dollar, rupiah, idr, kurs,
nilai tukar, mata uang, forex, valuta asing,
exchange rate
```

### **2. Federal Reserve & Policy** üè¶üìà
```
federal reserve, the fed, fed rate, suku bunga,
interest rate, inflasi, inflation, deflasi,
kebijakan moneter, monetary policy
```

### **3. Commodities** ü•áüõ¢Ô∏è
```
Emas: emas, gold, perak, silver, logam mulia
Minyak: minyak, oil, crude, brent, wti, opec, bbm
Komoditas: komoditas, commodity, bahan baku
```

### **4. Stock Market** üìä
```
saham, stock, bursa, ihsg, idx, wall street,
nasdaq, dow jones, s&p, s&p500, nyse
```

### **5. Crypto** ‚Çø
```
bitcoin, btc, ethereum, eth, crypto, kripto,
blockchain, altcoin
```

### **6. Global Economy** üåç
```
ekonomi, economy, gdp, pdb, pertumbuhan ekonomi,
resesi, recession, ekspor, impor, perdagangan,
trade, tarif
```

### **7. Banking & Finance** üè¶
```
bank, banking, bi, bank indonesia, ojk, kredit,
loan, financing, likuiditas
```

### **8. Investment** üíº
```
investasi, investment, investor, reksadana,
obligasi, bond, yield, return, profit, dividen
```

---

## üìù AI Prompt Structure

For each article, AI generates video with this structure:

### **1. HOOK (50-80 words)**
- Fakta mengejutkan / angka penting
- Relate dengan kehidupan sehari-hari
- Buat penasaran

**Example:**
> "Dolar AS naik 2% dalam sehari, mencapai Rp15,500. Ini level tertinggi dalam 3 bulan terakhir. Apa artinya untuk tabungan kita? Apakah ini saat yang tepat untuk beli dolar atau justru harus waspada?"

### **2. KONTEKS & ANALISIS (150-250 words)**
- Apa yang terjadi
- Mengapa ini terjadi
- Dampak ke berbagai pihak
- Data dan angka dari artikel

### **3. PREDIKSI H+7 (100-200 words)**
- 3 Skenario:
  * **Best case**: Optimis (contoh: Rupiah rebound ke Rp15,200)
  * **Most likely**: Realistis (contoh: Stabil di Rp15,400-15,600)
  * **Worst case**: Pesimis (contoh: Melemah ke Rp15,800)

### **4. ACTIONABLE TIPS (80-150 words)**
- 3-5 tips praktis
- Berbeda untuk profil berbeda
- Bisa dilakukan hari ini/minggu ini

**Example:**
> "Untuk investor konservatif: Tahan posisi dolar yang ada, jangan panic sell..."
> "Untuk trader: Watch level support di 15,400..."

### **5. CLOSING (30-50 words)**
- Ringkasan key takeaway
- Call to action

---

## ‚ú® Output Format (Clean!)

### **‚ùå OLD Format (with markdown):**
```
**Dolar naik** 2% hari ini. #USD #Forex

Ini **sangat penting** untuk investor! üöÄ
```

### **‚úÖ NEW Format (clean):**
```
Dolar naik 2% hari ini.

Ini sangat penting untuk investor!
```

**Removed:**
- ‚ùå `**bold**` markdown
- ‚ùå `#hashtag` in content
- ‚ùå Emoji in content (optional)
- ‚ùå Any formatting characters

**Kept:**
- ‚úÖ Hashtag in `hashtag` field (for YouTube metadata)
- ‚úÖ Clean paragraphs (double newline separator)
- ‚úÖ Plain text, easy to read

---

## üîß Customization

### **Change Keywords**

Edit `keyword-filter.js`:

```javascript
export const FINANCIAL_KEYWORDS = {
  // Add your custom keywords
  myTopic: ['keyword1', 'keyword2', 'keyword3'],
  ...
};
```

### **Change Matching Mode**

In `ai-generator-single.js`, line ~30:

```javascript
// Loose matching (current)
const filteredArticles = filterFinancialArticles(allArticles, false);

// Strict matching (exact word match only)
const filteredArticles = filterFinancialArticles(allArticles, true);
```

### **Change Video Length**

Edit prompt in `ai-generator-single.js`, line ~51:

```javascript
// Current: 300-800 words
Buatlah 1 video singkat (300-800 kata)

// Change to: 500-1000 words for longer videos
Buatlah 1 video (500-1000 kata)
```

### **Change Delay Settings**

Edit `scraper-unlimited.js`:

```javascript
// Line 124: Delay per article
const baseDelay = 2000;  // Change to 3000 for slower

// Line 125: Progressive delay
const progressiveDelay = Math.floor(totalArticles / 10) * 500;
// Increase 500 to 1000 for more cautious scraping
```

---

## üìà Performance Metrics

### **Typical Run (100 articles scraped):**

| Phase | Time | Details |
|-------|------|---------|
| Scraping | 5-10 min | 100 articles √ó 3s avg |
| Filtering | <1 sec | Instant keyword matching |
| AI Generation | 10-15 min | 40 matches √ó 20s each |
| Send to Project A | <10 sec | Fast DB insert |
| **Total** | **15-25 min** | Fully automated |

### **Output:**
- Articles scraped: ~100
- Matched articles: ~40-50 (40-50%)
- Videos generated: 40-50
- Ready to stream: 40-50 videos

---

## üé¨ Streaming the Results

After workflow completes:

```bash
cd C:\infomedia\yt-stream-node
npm start
```

Open: http://localhost:3000/dashboard.html

Click: **"Start Auto-Loop"**

**Result:** Your 40-50 financial insight videos will stream automatically to YouTube Live! üöÄ

---

## üõ†Ô∏è Troubleshooting

### **Problem: No articles matched**

**Cause:** Today's articles don't contain financial keywords

**Solution:**
1. Check scraped articles: `SELECT judul FROM news WHERE status='pending' LIMIT 20`
2. Maybe today's content is different (weekend, holiday)
3. Try looser keyword matching or add more keywords

### **Problem: AI generation timeout**

**Cause:** Too many articles to process

**Solution:**
1. Process in batches (edit code to limit to first 20)
2. Increase timeout in Gemini API
3. Run at different time (less API traffic)

### **Problem: Scraper blocked**

**Cause:** Too many requests, Kontan detected bot

**Solution:**
1. Increase delays in scraper (3-5s per article)
2. Use VPN/proxy
3. Run at off-peak hours
4. Wait 1 hour and try again

---

## üìö Files Reference

### **New Files:**
- `scraper-unlimited.js` - Unlimited scraper with smart delays
- `keyword-filter.js` - Financial keyword matching
- `ai-generator-single.js` - 1 article = 1 video generator
- `run-financial-workflow.js` - Main workflow runner
- `test-scraper-unlimited.js` - Test scraper
- `test-ai-single.js` - Test AI generator

### **Modified Files:**
- `package.json` - Added new scripts

### **Unchanged:**
- Old files still work (backward compatible)
- Use `run-workflow.js` for old multi-article merging
- Use `run-financial-workflow.js` for new 1:1 approach

---

## üéØ Best Practices

### **Daily Workflow:**

**Morning (9-10 AM):**
```bash
cd C:\infomedia\content-generator
npm run workflow
```
Wait 20-30 minutes for completion.

**Afternoon (12-1 PM):**
```bash
cd C:\infomedia\yt-stream-node
npm start
```
Start auto-loop streaming.

**Result:** 40-50 fresh financial insight videos streaming throughout the day! üìà

### **Quality Tips:**

1. **Run daily** - Fresh content performs better
2. **Monitor keywords** - Adjust based on trending topics
3. **Check output** - Verify first few videos look good
4. **Iterate prompt** - Improve AI prompt based on results
5. **Track performance** - See which topics get more views

---

## üéâ Success!

You now have a **fully automated financial content generation system**!

**From news articles ‚Üí AI insights ‚Üí YouTube Live**

All in ~20 minutes, fully hands-off! üöÄüí∞

---

**Questions? Check the code comments or run with `--help` flag!**
